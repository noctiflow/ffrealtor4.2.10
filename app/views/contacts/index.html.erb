<%= styles_for :contact %>

<%= render 'entities/title_bar' %>

<div class="remote" id="create_contact" hidden="true"></div>

<div style="border: thin grey solid;box-shadow:2px 2px 3px #aaa;background-color: #eee">
  <h3 style="padding-left:10px;padding-top: 8px">Filter</h3>
  <br>
  <%= form_for_filterrific @filterrific do |f| %>
      <div style="display:inline-block;padding-left:10px">
        Search
        <%# give the search field the 'filterrific-periodically-observed' class for live updates %>
        <%= f.text_field(
                :search_query,
                class: 'filterrific-periodically-observed'
            ) %>
      </div>
      <% if current_user.admin? %>
          <div style="display:inline-block;padding-left:10px">
            Assigned Realtor
            <%= f.select(
                    :with_assigned_to,
                    @filterrific.select_options[:with_assigned_to],
                    { include_blank: '- Any -' }
                ) %>
          </div>
      <% end %>
      <div style="display:inline-block;padding-left:10px">
        Buyer/Seller
        <%= f.select(
                :with_buysell,
                @filterrific.select_options[:with_buysell],
                { include_blank: '- All -'}
            ) %>
      </div>
      <div style="display:inline-block;padding-left:10px">
        Registered after
        <%= f.text_field(:with_created_at_gte, class: 'js-datepicker') %>
      </div>
      <div style="display:inline-block;padding-left:10px">
        Sort by
        <%= f.select(:sorted_by, @filterrific.select_options[:sorted_by]) %>
      </div>
      <br><br>
      <div style="padding-left:10px;padding-bottom: 7px">
        <%= link_to(
                'Reset filters',
                reset_filterrific_url,
            ) %>
      </div>
      <%# add an automated spinner to your form when the list is refreshed %>
      <%= render_filterrific_spinner %>
  <% end %>
</div>
<script>
  $(function(){
    $( ".js-datepicker" ).datepicker({
      dateFormat: 'yy-mm-dd'
    });
  });
</script>
<br>
<%= render(
        partial: 'contacts/list',
        locals: { contacts: @contacts }
    ) %>